gson을 이용해서 채팅

js에서 생성자 생성하고
function Message(sender,receiver,msg){
	this.sender = sender;
	this.receiver = receiver;
	this.msg = msg;
	}

서버에 보내줄때
js생성자를 이용해서 
socket.send() 메소드를 이용해서 쏴주는데

const sendMsg = new Message($("#sender").val(),$("#receiver").val(),$("#msg").val());
socket.send(JSON.stringify(sendMsg));


====================================================

디코더 인코더 클래스를 생성해서 인터페이스(text) 생성 후 alt + s + v

디코더
메소드 willDecode의 반환을 true로 바꿈 -> 그래야 인코딩 처리가 됨.

@Override
여기에 String msg 했던게 들어옴
public Message decode(String s) throws DecodeException {
		
	return new Gson().fromJson(s, Message.class);
}

인코더
@Override
Msg로 보내는 
문자열 형식 JSON으로 바꿔줌
public String encode(Message arg0) throws EncodeException {
		
	return new Gson().toJson(arg0);
}

서블릿에서

@ServerEndpoint(
		value="/chatting",
		encoders = {MessageEncoder.class},
		decoders = {MessageDecoder.class}
		--> 생성한 클래스들 선언해줌.
}

@OnMessage 에서 받는 매개변수 Message curmsg로 변경
밑에 send로 보낸 변수 curmsg로 쏴줌
